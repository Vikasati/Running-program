<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Vikasati Running Program</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 text-gray-900">
  <div class="container mx-auto p-4 md:p-8 max-w-5xl">

    <header class="text-center my-8 md:my-12">
      <h1 class="text-4xl md:text-6xl font-black text-[#FFC40B] leading-tight">
        Vikasati Running Program
      </h1>
      <p class="text-xl md:text-2xl mt-2 text-[#2D4946] font-semibold">
        5K or 10K Running Plan
      </p>
    </header>

    <section class="bg-white p-6 md:p-8 rounded-xl shadow-lg my-12">
      <h2 class="text-2xl md:text-3xl font-bold text-center mb-6">
        Customize Your Plan
      </h2>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <div>
          <label class="block text-sm font-medium text-[#2D4946] mb-1">
            Distance Goal
          </label>
          <select id="distanceSelect" class="w-full p-3 border border-gray-300 rounded-md">
            <option value="5k">5K</option>
            <option value="10k">10K</option>
          </select>
        </div>
        <div>
          <label class="block text-sm font-medium text-[#2D4946] mb-1">
            Sessions Per Week
          </label>
          <select id="sessionsPerWeek" class="w-full p-3 border border-gray-300 rounded-md">
            <option value="2">2</option>
            <option value="3">3</option>
          </select>
        </div>
        <div>
          <label class="block text-sm font-medium text-[#2D4946] mb-1">
            Terrain
          </label>
          <select id="terrainType" class="w-full p-3 border border-gray-300 rounded-md">
            <option value="flat">Flat</option>
            <option value="hilly">Hilly</option>
          </select>
        </div>
        <div>
          <label class="block text-sm font-medium text-[#2D4946] mb-1">
            Runner Experience Level
          </label>
          <select id="experienceLevel" class="w-full p-3 border border-gray-300 rounded-md">
            <option value="beginner">Beginner</option>
            <option value="intermediate">Intermediate</option>
            <option value="experienced">Experienced</option>
          </select>
        </div>
        <div>
          <label for="currentTime" class="block text-sm font-medium text-[#2D4946] mb-1">
            Current Time (MM:SS or 0)
          </label>
          <input type="text" id="currentTime" class="w-full p-3 border border-gray-300 rounded-md" placeholder="e.g., 30:00 or 0" />
          <p id="currentTimeError" class="text-red-500 text-xs mt-1"></p>
        </div>
        <div>
          <label for="goalTime" class="block text-sm font-medium text-[#2D4946] mb-1">
            Goal Time (MM:SS)
          </label>
          <input type="text" id="goalTime" class="w-full p-3 border border-gray-300 rounded-md" placeholder="e.g., 26:00" />
          <p id="goalTimeError" class="text-red-500 text-xs mt-1"></p>
        </div>
      </div>
      <div class="text-center mt-8">
        <button id="generateProgramBtn" class="bg-[#FFC40B] hover:bg-[#2D4946] text-[#2D4946] hover:text-white font-bold py-3 px-6 rounded-lg shadow-md">
          Generate Program
        </button>
      </div>
    </section>

    <section id="summaryPanel" class="hidden text-center text-[#2D4946] mb-8">
      <div class="text-lg font-semibold">You selected: <span id="summaryText"></span></div>
      <div class="text-sm">Your plan includes warm-up/cool-down, RPE, pace, and timed sessions.</div>
    </section>

    <section id="programOutputSection" class="bg-white p-4 md:p-6 rounded-xl shadow-lg my-12 hidden">
      <h2 class="text-2xl md:text-3xl font-bold text-center mb-6">Your Weekly Sessions</h2>
      <div id="programCardsContainer" class="space-y-6"></div>
      <p class="text-sm text-center text-[#2D4946] mt-6">Warm-up: 5–10 min jog/walk. Cool-down: 5–10 min jog/walk. Adjust effort by terrain or feel.</p>
    </section>
  </div>

  <script>
    function parseTimeToSeconds(t) {
      if (t === '0' || t === '00:00') return 0;
      const [m, s] = t.split(':').map(Number);
      return isNaN(m) || isNaN(s) ? NaN : m * 60 + s;
    }
    function formatPace(sec) { const m = Math.floor(sec / 60), s = sec % 60; return `${m}:${s.toString().padStart(2, '0')}`; }
    function formatDuration(m) { return `${m} min`; }
    function rpeLabel(r) { return `RPE ${r} - ${{5:'Steady',6:'Comfortable',7:'Challenging',8:'Hard',9:'Very hard'}[r] || 'Unknown'}`; }
    function easyDuration(lvl, goal) {
      return {beginner:{'5k':'15–20 min','10k':'20–30 min'}, intermediate:{'5k':'20–30 min','10k':'30–40 min'}, experienced:{'5k':'25–35 min','10k':'35–45 min'}}[lvl]?.[goal] || '';
    }
    function intervalDesc(week, lvl) {
      const ints = {
        beginner:['4x1 run 1 walk','4x2 run 1 walk','3x3 run 1 walk','4x3 run 1 walk','4x4 run 1 jog','2x5 run 1 jog'],
        intermediate:['4x2 hard 1 walk','4x3 hard 1 walk','5x3 hard 1 walk','4x4 hard 1 jog','3x5 hard 1 jog','2x6 hard 1 jog'],
        experienced:['4x3@thr 1 jog','5x4@5K pace 1 jog','3x6@10K pace 2 jog','2x8@thr 2 jog','5x3 fartlek 1 jog','3x5 thr 1 jog']
      };
      return ints[lvl][Math.min(week-1,5)];
    }
    function buildPlan(dist, sess, terr, lvl, cur, goal) {
      const weeks=6, hill=terr==='hilly'?1:0;
      const eff=cur?cur/(dist==='10k'?10:5):420;
      const goalP=goal/(dist==='10k'?10:5);
      const plan=[];
      for (let w=1; w<=weeks; w++) {
        const ws=[];
        for (let s=1;s<=+sess;s++){
          let icon='', desc='', rpe=6, pace=eff;
          if (s===1) {
            const dur = easyDuration(lvl, dist);
            desc = `Easy Run – ${dur}`;
            icon='🌿'; rpe=5+hill; pace=eff+20;
          } else if (s===2) {
            icon='⚡'; desc=`Intervals: ${intervalDesc(w,lvl)}`; rpe=7+hill; pace=goalP-10+w*2;
          } else {
            icon='🏃'; desc=`Tempo Run – ${formatDuration(20+w*2)}`; rpe=6+hill; pace=goalP+10;
          }
          ws.push({icon, description: desc, rpe: rpeLabel(rpe), pace: formatPace(Math.max(240,Math.round(pace)))});
        }
        plan.push({week:w, sessions:ws});
      }
      return plan;
    }
    function validate(cur, goal) {
      let ok=true;
      if (isNaN(parseTimeToSeconds(cur))) { document.getElementById('currentTimeError').textContent='Invalid'; ok=false;} else document.getElementById('currentTimeError').textContent='';
      if (!parseTimeToSeconds(goal)) { document.getElementById('goalTimeError').textContent='Invalid'; ok=false;} else document.getElementById('goalTimeError').textContent='';
      return ok;
    }
    document.getElementById('generateProgramBtn').addEventListener('click', () => {
      const dist=document.getElementById('distanceSelect').value;
      const sess=document.getElementById('sessionsPerWeek').value;
      const terr=document.getElementById('terrainType').value;
      const lvl=document.getElementById('experienceLevel').value;
      const cur=document.getElementById('currentTime').value;
      const goal=document.getElementById('goalTime').value;
      if (!validate(cur, goal)) return;
      const plan=buildPlan(dist, sess, terr, lvl, parseTimeToSeconds(cur), parseTimeToSeconds(goal));
      document.getElementById('summaryText').textContent=`Distance: ${dist.toUpperCase()} | ${sess} sessions | ${terr} terrain | ${lvl} runner`;
      document.getElementById('summaryPanel').classList.remove('hidden');
      const cont=document.getElementById('programCardsContainer'); cont.innerHTML='';
      plan.forEach(wk=>{
        const card=document.createElement('div'); card.className='border rounded-xl shadow p-4 bg-[#E9EAE6]';
        let html=`<h3 class="text-xl font-bold text-[#2D4946] mb-2">Week ${wk.week}</h3>`;
        wk.sessions.forEach(s=>{
          html+=`<div class="mb-3 p-3 bg-white rounded-lg shadow-sm">
            <div class="flex items-center gap-2 text-lg font-semibold">${s.icon} ${s.description}</div>
            <div class="text-sm mt-1">${s.rpe}</div>
            <div class="text-sm text-gray-500">Target Pace: ${s.pace}/km</div>
          </div>`;
        });
        card.innerHTML=html; cont.appendChild(card);
      });
      document.getElementById('programOutputSection').classList.remove('hidden');
      document.getElementById('programOutputSection').scrollIntoView({behavior:'smooth'});
    });
  </script>
</body>
</html>
