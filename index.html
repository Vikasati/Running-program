<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Vikasati Running Program</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
</head>
<body class="bg-gray-100 text-gray-900">
  <div class="container mx-auto p-4 md:p-8 max-w-5xl">
    <header class="text-center my-8 md:my-12">
      <h1 class="text-4xl md:text-6xl font-black text-[#FFC40B] leading-tight">
        Vikasati Running Program
      </h1>
      <p class="text-xl md:text-2xl mt-2 text-[#2D4946] font-semibold">
        5K or 10K Running Plan
      </p>
    </header>

    <section class="bg-white p-6 md:p-8 rounded-xl shadow-lg my-12">
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <div>
          <label class="block font-semibold mb-1">Distance Goal</label>
          <select id="distanceSelect" class="w-full p-2 rounded border">
            <option value="5k">5K</option>
            <option value="10k">10K</option>
          </select>
        </div>
        <div>
          <label class="block font-semibold mb-1">Sessions per Week</label>
          <select id="sessionsPerWeek" class="w-full p-2 rounded border">
            <option value="2">2</option>
            <option value="3" selected>3</option>
          </select>
        </div>
        <div>
          <label class="block font-semibold mb-1">Terrain Type</label>
          <select id="terrainType" class="w-full p-2 rounded border">
            <option value="flat" selected>Flat</option>
            <option value="hilly">Hilly</option>
          </select>
        </div>
        <div>
          <label class="block font-semibold mb-1">Experience Level</label>
          <select id="experienceLevel" class="w-full p-2 rounded border">
            <option value="beginner">Beginner</option>
            <option value="intermediate">Intermediate</option>
            <option value="experienced">Experienced</option>
          </select>
        </div>
        <div>
          <label class="block font-semibold mb-1">Current Time (mm:ss)</label>
          <input id="currentTime" type="text" class="w-full p-2 rounded border" placeholder="e.g. 30:00" />
          <div id="currentTimeError" class="text-red-600 text-sm"></div>
        </div>
        <div>
          <label class="block font-semibold mb-1">Goal Time (mm:ss)</label>
          <input id="goalTime" type="text" class="w-full p-2 rounded border" placeholder="e.g. 25:00" />
          <div id="goalTimeError" class="text-red-600 text-sm"></div>
        </div>
      </div>
      <div class="text-center mt-6">
        <button id="generateProgramBtn" class="bg-[#2D4946] text-white px-6 py-3 rounded-xl font-bold">
          Generate Program
        </button>
      </div>
    </section>

    <section id="summaryPanel" class="hidden text-center text-[#2D4946] mb-8">
      <div class="text-lg font-semibold">
        You selected: <span id="summaryText"></span>
      </div>
      <div class="text-sm">
        Includes warm‑up & cool‑down, RPE, pace per km, timed sessions.
      </div>
      <p class="text-sm mt-2">
        Track progress by checking off sessions. Need more challenge? Adjust your inputs and regenerate anytime.
      </p>
    </section>

    <section id="programOutputSection" class="hidden bg-white p-4 md:p-6 rounded-xl shadow-lg my-12">
      <h2 class="text-2xl md:text-3xl font-bold text-center mb-6">
        Your Weekly Sessions
      </h2>
      <div id="programCardsContainer" class="space-y-6"></div>
      <p class="text-sm text-center text-[#2D4946] mt-6">
        Warm‑up: 5‑10 min jog/walk. Cool‑down: 5‑10 min jog/walk. Modify effort based on terrain and feel.
      </p>
      <div class="text-center mt-6">
        <button id="downloadPDF" class="bg-[#FFC40B] text-black px-6 py-3 rounded-xl font-bold">
          Download PDF
        </button>
      </div>
    </section>
  </div>

  <script>
    const distSel = document.getElementById('distanceSelect');
    const sessSel = document.getElementById('sessionsPerWeek');
    const terrSel = document.getElementById('terrainType');
    const lvlSel = document.getElementById('experienceLevel');
    const curTime = document.getElementById('currentTime');
    const goalTime = document.getElementById('goalTime');
    const generateBtn = document.getElementById('generateProgramBtn');

    window.onload = () => {
      const saved = JSON.parse(localStorage.getItem('runningProgram'));
      if (saved) {
        distSel.value = saved.dist;
        sessSel.value = saved.sess;
        terrSel.value = saved.terr;
        lvlSel.value = saved.lvl;
        curTime.value = saved.curTime;
        goalTime.value = saved.goalTime;
        generateBtn.click();
      }
    };

    document.getElementById('downloadPDF').addEventListener('click', () => {
      const { jsPDF } = window.jspdf;
      const doc = new jsPDF();
      doc.html(document.getElementById('programOutputSection'), {
        callback: function (pdf) {
          pdf.save('vikasati_running_plan.pdf');
        },
        x: 10,
        y: 10,
        width: 190
      });
    });
  </script>
  <!-- Keep rest of your JS logic from the previous script here for buildPlan(), validation, render, etc. -->
</body>
</html>
